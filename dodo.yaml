backdrops:
  make:
    image:
      steps: |
        FROM golang:1.16-alpine3.12
        ENV CGO_ENABLED=0
        RUN apk add -U git bash curl tree make
        RUN go get -u github.com/dave/jennifer/jen
        RUN curl -sSfL https://install.goreleaser.com/github.com/goreleaser/goreleaser.sh | sh
        RUN curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s v1.27.0
    volumes:
      - "{{ projectRoot }}:/build"
      - "{{ projectRoot }}/.cache:/go/pkg/mod"
    working_dir: /build
    script: make $@
    command: all
